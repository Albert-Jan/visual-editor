# Selection (WIP)

## How Text Selection Works
`TextGesturesService` controls the selection of text after tapDown and tapUp events. Once the selection range is known it's then passed to the state store. Starting and updating the selection is triggered from the `TextGestures` widget and parsed by this service which in turn calls `TextSelectionService`. The `TextGestures` widget is used in the main `build()` method. It adds a gesture detector which interprets the various touchscreen signals into potential gestures. Once a gesture is detected in the callback executed, then the `controller.updateSelection()` is called which triggers the `refreshEditor()` which triggers a `build()` in main. Remember, the main `build()` contains the widgets generated by the `documentBlocsAndLines()`. These are a list of editable text lines and blocks. Once `build()` is triggered each `EditableTextLine` widget, then calls on the renderer object methods to update information. If the renderer callbacks notice that the selection is changed and within it's bounds then it triggers a `paint()` cycle. A new `paint()` cycle will "render" the selection rectangles vector data on top of the text.

## Selection Actions (WIP)
On mobile the copy paste actions are executed via the context menu. These are controlled by the `SelectionActionsController`. This controller is also in charge of rendering the options menu overlaid on top of the text.

Join on [discord](https://discord.gg/XpGygmXde4) to get advice and help or follow us on [YouTube Visual Coding](https://www.youtube.com/channel/UC2-5lfNbbErIds0Iuai8yfA) to learn more about the architecture of Visual Editor and other Flutter apps.